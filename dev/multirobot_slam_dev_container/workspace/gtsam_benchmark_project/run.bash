#!/bin/bash

# Batch optimization benchmark

# Benchmark 0: Error on initial estimates

# ./build/bin/gtsam_benchmark --benchmark 0 --exp 0 --optimizer ISAM2
# ./build/bin/gtsam_benchmark --benchmark 0 --exp 1 --optimizer ISAM2
# ./build/bin/gtsam_benchmark --benchmark 0 --exp 2 --optimizer ISAM2
# ./build/bin/gtsam_benchmark --benchmark 0 --exp 3 --optimizer ISAM2
# ./build/bin/gtsam_benchmark --benchmark 0 --exp 4 --optimizer ISAM2
# ./build/bin/gtsam_benchmark --benchmark 0 --exp 5 --optimizer ISAM2
# ./build/bin/gtsam_benchmark --benchmark 0 --exp 6 --optimizer ISAM2
# ./build/bin/gtsam_benchmark --benchmark 0 --exp 7 --optimizer ISAM2

# ./build/bin/gtsam_benchmark --benchmark 0 --exp 0 --optimizer LevenbergMarquardtOptimizer
# ./build/bin/gtsam_benchmark --benchmark 0 --exp 1 --optimizer LevenbergMarquardtOptimizer
# ./build/bin/gtsam_benchmark --benchmark 0 --exp 2 --optimizer LevenbergMarquardtOptimizer
# ./build/bin/gtsam_benchmark --benchmark 0 --exp 3 --optimizer LevenbergMarquardtOptimizer
# ./build/bin/gtsam_benchmark --benchmark 0 --exp 4 --optimizer LevenbergMarquardtOptimizer
# ./build/bin/gtsam_benchmark --benchmark 0 --exp 5 --optimizer LevenbergMarquardtOptimizer
# ./build/bin/gtsam_benchmark --benchmark 0 --exp 6 --optimizer LevenbergMarquardtOptimizer
# ./build/bin/gtsam_benchmark --benchmark 0 --exp 7 --optimizer LevenbergMarquardtOptimizer

# ./build/bin/gtsam_benchmark --benchmark 0 --exp 0 --optimizer GaussNewtonOptimizer
# ./build/bin/gtsam_benchmark --benchmark 0 --exp 1 --optimizer GaussNewtonOptimizer
# ./build/bin/gtsam_benchmark --benchmark 0 --exp 2 --optimizer GaussNewtonOptimizer
# ./build/bin/gtsam_benchmark --benchmark 0 --exp 3 --optimizer GaussNewtonOptimizer
# ./build/bin/gtsam_benchmark --benchmark 0 --exp 4 --optimizer GaussNewtonOptimizer
# ./build/bin/gtsam_benchmark --benchmark 0 --exp 5 --optimizer GaussNewtonOptimizer
# ./build/bin/gtsam_benchmark --benchmark 0 --exp 6 --optimizer GaussNewtonOptimizer
# ./build/bin/gtsam_benchmark --benchmark 0 --exp 7 --optimizer GaussNewtonOptimizer

# ./build/bin/gtsam_benchmark --benchmark 0 --exp 0 --optimizer NonlinearConjugateGradientOptimizer
# ./build/bin/gtsam_benchmark --benchmark 0 --exp 1 --optimizer NonlinearConjugateGradientOptimizer
# ./build/bin/gtsam_benchmark --benchmark 0 --exp 2 --optimizer NonlinearConjugateGradientOptimizer
# ./build/bin/gtsam_benchmark --benchmark 0 --exp 3 --optimizer NonlinearConjugateGradientOptimizer
# ./build/bin/gtsam_benchmark --benchmark 0 --exp 4 --optimizer NonlinearConjugateGradientOptimizer
# ./build/bin/gtsam_benchmark --benchmark 0 --exp 5 --optimizer NonlinearConjugateGradientOptimizer
# ./build/bin/gtsam_benchmark --benchmark 0 --exp 6 --optimizer NonlinearConjugateGradientOptimizer
# ./build/bin/gtsam_benchmark --benchmark 0 --exp 7 --optimizer NonlinearConjugateGradientOptimizer







# Benchmark 1: Error on measures

# ./build/bin/gtsam_benchmark --benchmark 1 --exp 8  --optimizer ISAM2
# ./build/bin/gtsam_benchmark --benchmark 1 --exp 9  --optimizer ISAM2
# ./build/bin/gtsam_benchmark --benchmark 1 --exp 10 --optimizer ISAM2
# ./build/bin/gtsam_benchmark --benchmark 1 --exp 11 --optimizer ISAM2
# ./build/bin/gtsam_benchmark --benchmark 1 --exp 12 --optimizer ISAM2
# ./build/bin/gtsam_benchmark --benchmark 1 --exp 13 --optimizer ISAM2

# ./build/bin/gtsam_benchmark --benchmark 1 --exp 8  --optimizer LevenbergMarquardtOptimizer
# ./build/bin/gtsam_benchmark --benchmark 1 --exp 9  --optimizer LevenbergMarquardtOptimizer
# ./build/bin/gtsam_benchmark --benchmark 1 --exp 10 --optimizer LevenbergMarquardtOptimizer
# ./build/bin/gtsam_benchmark --benchmark 1 --exp 11 --optimizer LevenbergMarquardtOptimizer
# ./build/bin/gtsam_benchmark --benchmark 1 --exp 12 --optimizer LevenbergMarquardtOptimizer
# ./build/bin/gtsam_benchmark --benchmark 1 --exp 13 --optimizer LevenbergMarquardtOptimizer

# ./build/bin/gtsam_benchmark --benchmark 1 --exp 8  --optimizer GaussNewtonOptimizer
# ./build/bin/gtsam_benchmark --benchmark 1 --exp 9  --optimizer GaussNewtonOptimizer
# ./build/bin/gtsam_benchmark --benchmark 1 --exp 10 --optimizer GaussNewtonOptimizer
# ./build/bin/gtsam_benchmark --benchmark 1 --exp 11 --optimizer GaussNewtonOptimizer
# ./build/bin/gtsam_benchmark --benchmark 1 --exp 12 --optimizer GaussNewtonOptimizer
# ./build/bin/gtsam_benchmark --benchmark 1 --exp 13 --optimizer GaussNewtonOptimizer

# ./build/bin/gtsam_benchmark --benchmark 1 --exp 8  --optimizer NonlinearConjugateGradientOptimizer
# ./build/bin/gtsam_benchmark --benchmark 1 --exp 9  --optimizer NonlinearConjugateGradientOptimizer
# ./build/bin/gtsam_benchmark --benchmark 1 --exp 10 --optimizer NonlinearConjugateGradientOptimizer
# ./build/bin/gtsam_benchmark --benchmark 1 --exp 11 --optimizer NonlinearConjugateGradientOptimizer
# ./build/bin/gtsam_benchmark --benchmark 1 --exp 12 --optimizer NonlinearConjugateGradientOptimizer
# ./build/bin/gtsam_benchmark --benchmark 1 --exp 13 --optimizer NonlinearConjugateGradientOptimizer








# Benchmark 2: Outliers

# ./build/bin/gtsam_benchmark --benchmark 2 --exp 14  --optimizer ISAM2
# ./build/bin/gtsam_benchmark --benchmark 2 --exp 15  --optimizer ISAM2
# ./build/bin/gtsam_benchmark --benchmark 2 --exp 16  --optimizer ISAM2
# ./build/bin/gtsam_benchmark --benchmark 2 --exp 17  --optimizer ISAM2
# ./build/bin/gtsam_benchmark --benchmark 2 --exp 18  --optimizer ISAM2
# ./build/bin/gtsam_benchmark --benchmark 2 --exp 19  --optimizer ISAM2
# ./build/bin/gtsam_benchmark --benchmark 2 --exp 20  --optimizer ISAM2
# ./build/bin/gtsam_benchmark --benchmark 2 --exp 21  --optimizer ISAM2
# ./build/bin/gtsam_benchmark --benchmark 2 --exp 22  --optimizer ISAM2
# ./build/bin/gtsam_benchmark --benchmark 2 --exp 23  --optimizer ISAM2
# ./build/bin/gtsam_benchmark --benchmark 2 --exp 24  --optimizer ISAM2

# ./build/bin/gtsam_benchmark --benchmark 2 --exp 14  --optimizer LevenbergMarquardtOptimizer
# ./build/bin/gtsam_benchmark --benchmark 2 --exp 15  --optimizer LevenbergMarquardtOptimizer
# ./build/bin/gtsam_benchmark --benchmark 2 --exp 16  --optimizer LevenbergMarquardtOptimizer
# ./build/bin/gtsam_benchmark --benchmark 2 --exp 17  --optimizer LevenbergMarquardtOptimizer
# ./build/bin/gtsam_benchmark --benchmark 2 --exp 18  --optimizer LevenbergMarquardtOptimizer
# ./build/bin/gtsam_benchmark --benchmark 2 --exp 19  --optimizer LevenbergMarquardtOptimizer
# ./build/bin/gtsam_benchmark --benchmark 2 --exp 20  --optimizer LevenbergMarquardtOptimizer
# ./build/bin/gtsam_benchmark --benchmark 2 --exp 21  --optimizer LevenbergMarquardtOptimizer
# ./build/bin/gtsam_benchmark --benchmark 2 --exp 22  --optimizer LevenbergMarquardtOptimizer
# ./build/bin/gtsam_benchmark --benchmark 2 --exp 23  --optimizer LevenbergMarquardtOptimizer
# ./build/bin/gtsam_benchmark --benchmark 2 --exp 24  --optimizer LevenbergMarquardtOptimizer

# ./build/bin/gtsam_benchmark --benchmark 2 --exp 14  --optimizer GaussNewtonOptimizer
# ./build/bin/gtsam_benchmark --benchmark 2 --exp 15  --optimizer GaussNewtonOptimizer
# ./build/bin/gtsam_benchmark --benchmark 2 --exp 16  --optimizer GaussNewtonOptimizer
# ./build/bin/gtsam_benchmark --benchmark 2 --exp 17  --optimizer GaussNewtonOptimizer
# ./build/bin/gtsam_benchmark --benchmark 2 --exp 18  --optimizer GaussNewtonOptimizer
# ./build/bin/gtsam_benchmark --benchmark 2 --exp 19  --optimizer GaussNewtonOptimizer
# ./build/bin/gtsam_benchmark --benchmark 2 --exp 20  --optimizer GaussNewtonOptimizer
# ./build/bin/gtsam_benchmark --benchmark 2 --exp 21  --optimizer GaussNewtonOptimizer
# ./build/bin/gtsam_benchmark --benchmark 2 --exp 22  --optimizer GaussNewtonOptimizer
# ./build/bin/gtsam_benchmark --benchmark 2 --exp 23  --optimizer GaussNewtonOptimizer
# ./build/bin/gtsam_benchmark --benchmark 2 --exp 24  --optimizer GaussNewtonOptimizer

# ./build/bin/gtsam_benchmark --benchmark 2 --exp 14  --optimizer NonlinearConjugateGradientOptimizer
# ./build/bin/gtsam_benchmark --benchmark 2 --exp 15  --optimizer NonlinearConjugateGradientOptimizer
# ./build/bin/gtsam_benchmark --benchmark 2 --exp 16  --optimizer NonlinearConjugateGradientOptimizer
# ./build/bin/gtsam_benchmark --benchmark 2 --exp 17  --optimizer NonlinearConjugateGradientOptimizer
# ./build/bin/gtsam_benchmark --benchmark 2 --exp 18  --optimizer NonlinearConjugateGradientOptimizer
# ./build/bin/gtsam_benchmark --benchmark 2 --exp 19  --optimizer NonlinearConjugateGradientOptimizer
# ./build/bin/gtsam_benchmark --benchmark 2 --exp 20  --optimizer NonlinearConjugateGradientOptimizer
# ./build/bin/gtsam_benchmark --benchmark 2 --exp 21  --optimizer NonlinearConjugateGradientOptimizer
# ./build/bin/gtsam_benchmark --benchmark 2 --exp 22  --optimizer NonlinearConjugateGradientOptimizer
# ./build/bin/gtsam_benchmark --benchmark 2 --exp 23  --optimizer NonlinearConjugateGradientOptimizer
# ./build/bin/gtsam_benchmark --benchmark 2 --exp 24  --optimizer NonlinearConjugateGradientOptimizer




# Incremental optimization benchmark on isam (no sliding window)

# ./build/bin/gtsam_isam_no_window_benchmark --benchmark 0 --exp 0
# ./build/bin/gtsam_isam_no_window_benchmark --benchmark 0 --exp 1
# ./build/bin/gtsam_isam_no_window_benchmark --benchmark 0 --exp 2
# ./build/bin/gtsam_isam_no_window_benchmark --benchmark 0 --exp 3
# ./build/bin/gtsam_isam_no_window_benchmark --benchmark 0 --exp 4
# ./build/bin/gtsam_isam_no_window_benchmark --benchmark 0 --exp 5

# ./build/bin/gtsam_isam_no_window_benchmark --benchmark 1 --exp 8
# ./build/bin/gtsam_isam_no_window_benchmark --benchmark 1 --exp 9
# ./build/bin/gtsam_isam_no_window_benchmark --benchmark 1 --exp 10
# ./build/bin/gtsam_isam_no_window_benchmark --benchmark 1 --exp 11

# ./build/bin/gtsam_isam_no_window_benchmark --benchmark 2 --exp 14
# ./build/bin/gtsam_isam_no_window_benchmark --benchmark 2 --exp 15
# ./build/bin/gtsam_isam_no_window_benchmark --benchmark 2 --exp 16
# ./build/bin/gtsam_isam_no_window_benchmark --benchmark 2 --exp 17







# Incremental optimization benchmark on isam (with sliding window on factors)

# ./build/bin/gtsam_isam_benchmark --benchmark 0 --exp 0 --window_mode factor --window_size 1000
# ./build/bin/gtsam_isam_benchmark --benchmark 0 --exp 1 --window_mode factor --window_size 1000
# ./build/bin/gtsam_isam_benchmark --benchmark 0 --exp 2 --window_mode factor --window_size 1000
# ./build/bin/gtsam_isam_benchmark --benchmark 0 --exp 3 --window_mode factor --window_size 1000
# ./build/bin/gtsam_isam_benchmark --benchmark 0 --exp 4 --window_mode factor --window_size 1000
# ./build/bin/gtsam_isam_benchmark --benchmark 0 --exp 5 --window_mode factor --window_size 1000

# ./build/bin/gtsam_isam_benchmark --benchmark 1 --exp 8 --window_mode factor --window_size 1000
# ./build/bin/gtsam_isam_benchmark --benchmark 1 --exp 9 --window_mode factor --window_size 1000
# ./build/bin/gtsam_isam_benchmark --benchmark 1 --exp 10 --window_mode factor --window_size 1000
# ./build/bin/gtsam_isam_benchmark --benchmark 1 --exp 11 --window_mode factor --window_size 1000

# ./build/bin/gtsam_isam_benchmark --benchmark 2 --exp 14 --window_mode factor --window_size 1000
# ./build/bin/gtsam_isam_benchmark --benchmark 2 --exp 15 --window_mode factor --window_size 1000
# ./build/bin/gtsam_isam_benchmark --benchmark 2 --exp 16 --window_mode factor --window_size 1000
# ./build/bin/gtsam_isam_benchmark --benchmark 2 --exp 17 --window_mode factor --window_size 1000


# Incremental optimization benchmark on isam (with sliding window on poses)

# ./build/bin/gtsam_isam_benchmark --benchmark 0 --exp 0 --window_mode pose --window_size 100
# ./build/bin/gtsam_isam_benchmark --benchmark 0 --exp 1 --window_mode pose --window_size 100
# ./build/bin/gtsam_isam_benchmark --benchmark 0 --exp 2 --window_mode pose --window_size 100
# ./build/bin/gtsam_isam_benchmark --benchmark 0 --exp 3 --window_mode pose --window_size 100
# ./build/bin/gtsam_isam_benchmark --benchmark 0 --exp 4 --window_mode pose --window_size 100
# ./build/bin/gtsam_isam_benchmark --benchmark 0 --exp 5 --window_mode pose --window_size 100

# ./build/bin/gtsam_isam_benchmark --benchmark 1 --exp 8 --window_mode pose --window_size 100
# ./build/bin/gtsam_isam_benchmark --benchmark 1 --exp 9 --window_mode pose --window_size 100
# ./build/bin/gtsam_isam_benchmark --benchmark 1 --exp 10 --window_mode pose --window_size 100
# ./build/bin/gtsam_isam_benchmark --benchmark 1 --exp 11 --window_mode pose --window_size 100

# ./build/bin/gtsam_isam_benchmark --benchmark 2 --exp 14 --window_mode pose --window_size 100
# ./build/bin/gtsam_isam_benchmark --benchmark 2 --exp 15 --window_mode pose --window_size 100
# ./build/bin/gtsam_isam_benchmark --benchmark 2 --exp 16 --window_mode pose --window_size 100
# ./build/bin/gtsam_isam_benchmark --benchmark 2 --exp 17 --window_mode pose --window_size 100